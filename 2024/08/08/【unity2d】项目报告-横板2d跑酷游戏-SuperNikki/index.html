<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="John Doe">







<title>【unity2d】项目报告 横板2d跑酷游戏 SuperNikki | Hexo</title>



    <link rel="icon" href="/favicon.ico">



<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Roboto+Mono&display=swap');
</style>



    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    




    <!-- scripts list from _config.yml -->
    
    <script src="/js/menu.js"></script>
    







    <script src='https://unpkg.com/valine@1.4.16/dist/Valine.min.js'></script>




  <!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head>
  <body>
    <div class="mask-border">
    </div>

    <div class="wrapper">

      <div class="header">
  <div class="flex-container">
    <div class="header-inner">
      <div class="site-brand-container">
        <a href="/">
          
            首页
          
        </a>
      </div>
      <div id="menu-btn" class="menu-btn" onclick="toggleMenu()">
        Menu
      </div>
      <nav class="site-nav">
        <ul class="menu-list">
          
            
              <li class="menu-item">
                <a href="/">主页</a>
              </li> 
                   
          
            
              <li class="menu-item">
                <a href="/archives/">归档</a>
              </li> 
                   
          
            
              <li class="menu-item">
                <a href="/categories/gallery/">画廊</a>
              </li> 
                   
          
          
            <li class="menu-item search-btn">
              <a href="#">Search</a>
            </li>
          
        </ul>
      </nav>
    </div>
  </div>
</div>


      <div class="main">
        <div class="flex-container">
          <article id="post">

  
    <div class="post-head">
    <div class="post-info">
        <div class="tag-list">
            
                
                    <span class="post-tag">
                        <a href="/tags/unity2d/">
                            unity2d
                        </a>
                    </span>    
                           
            
        </div>
        <div class="post-title">
            
            
                【unity2d】项目报告 横板2d跑酷游戏 SuperNikki
            
            
        </div>
        <span class="post-date">
            Aug 8, 2024
        </span>
    </div>
    <div class="post-img">
        
            <div class="h-line-primary"></div>
              
    </div>
</div>
    <div class="post-content">
    <!-- toc -->

<ul>
<li><a href="#1-%E5%88%9B%E5%BB%BA%E6%96%B0%E9%A1%B9%E7%9B%AE">1 创建新项目</a></li>
<li><a href="#2-%E4%BD%BF%E7%94%A8%E5%9B%BE%E5%83%8F%E7%B4%A0%E6%9D%90%E5%88%B6%E4%BD%9C%E6%B8%B8%E6%88%8F%E7%94%BB%E9%9D%A2">2 使用图像素材制作游戏画面</a></li>
<li><a href="#3-%E5%88%B6%E4%BD%9C%E7%8E%A9%E5%AE%B6%E8%A7%92%E8%89%B2">3 制作玩家角色</a></li>
<li><a href="#4-%E7%94%A8%E8%84%9A%E6%9C%AC%E6%8E%A7%E5%88%B6%E8%A7%92%E8%89%B2%E7%A7%BB%E5%8A%A8-%E8%B7%B3%E8%B7%83-%E5%8A%A8%E7%94%BB">4 用脚本控制角色移动、跳跃、动画</a></li>
<li><a href="#5-%E5%88%B6%E4%BD%9C%E6%B8%B8%E6%88%8F%E5%85%B3%E5%8D%A1">5 制作游戏关卡</a></li>
<li><a href="#6-%E5%BC%80%E5%8F%91%E6%B8%B8%E6%88%8F%E7%9A%84ui">6 开发游戏的UI</a></li>
</ul>
<!-- tocstop -->

<p>[TOC]</p>
<h2><span id="1-创建新项目">1 创建新项目</span></h2><p>启动unity，点击“新项目”，选择“2d”，这样就创建了一个新项目。</p>
<p><strong>导入素材有两种方法：</strong></p>
<p>①点击window菜单栏 -&gt; Asset Store -&gt; 搜索 -&gt; Import</p>
<p>将所有资源一次性全部导入。</p>
<p>② 准备好本地资源，拖拽到Assets文件夹下。</p>
<p><strong>保存游戏关卡：</strong></p>
<p>点击File -&gt; save as -&gt; 选择Scenes文件夹 -&gt; 重命名为“Stage1” -&gt; 保存。</p>
<p>点击File -&gt; Build Settings…，将保存好的场景文件拖拽到Scenes in build的框内，这样这个场景就可以使用了。</p>
<h2><span id="2-使用图像素材制作游戏画面">2 使用图像素材制作游戏画面</span></h2><p>将背景图像和跳台图像拖拽到场景视图中，注意要放在摄像机的范围内，并将跳台的Order in layer设置为2（0以上的数值）。</p>
<p>把玩家图像拖拽到场景视图中，Order in layer设置为3。</p>
<p>这样，图像显示的优先顺序就变成了玩家&gt;跳台&gt;背景。</p>
<h2><span id="3-制作玩家角色">3 制作玩家角色</span></h2><p>选择玩家，单击Add Component -&gt; 搜索Rigidbody 2D -&gt; 单击添加。</p>
<p>将重力Gravity Scale设置为1.5。</p>
<p>勾选Freeze Rotation Z。（禁止旋转）</p>
<p>单击Add Component -&gt; 添加Capsule Collider 2D。</p>
<p><strong>给物体添加碰撞体积：</strong></p>
<p>选中跳台，单击Add Component -&gt; 搜索Rigidbody 2D -&gt; 单击添加。</p>
<p>这样，也给跳台添加了重力效果。</p>
<p>单击Add Component -&gt; 添加Box collider 2D，这样就给跳台添加了碰撞体积。</p>
<p><img src="/2024/08/08/%E3%80%90unity2d%E3%80%91%E9%A1%B9%E7%9B%AE%E6%8A%A5%E5%91%8A-%E6%A8%AA%E6%9D%BF2d%E8%B7%91%E9%85%B7%E6%B8%B8%E6%88%8F-SuperNikki/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20240808020912.png" alt="微信截图_20240808020912"></p>
<p>可以看到角色稳稳当当地落在跳台上。</p>
<h2><span id="4-用脚本控制角色移动-跳跃-动画">4 用脚本控制角色移动、跳跃、动画</span></h2><p>新建C#脚本，命名为PlayerController。</p>
<p>拖拽脚本使其附着在玩家角色上。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GameObject obj =（游戏物体）.GetComponent&lt;类型名&gt;();</span><br><span class="line">可以用此方法取得附着于该游戏物体上的任意组件。</span><br><span class="line">当用的是this.时，表示从自身取得。此外，this.的写法可以省略。</span><br></pre></td></tr></table></figure>

<p><strong>Update函数：</strong></p>
<p>游戏通过定期对画面进行微小的刷新，来使画面看起来在动，这就是帧。</p>
<p>在unity中，每一帧都会调用一次update函数，将画面刷新和游戏动作相关的内容在update函数中实现，就可以反映在游戏中了。</p>
<p>update函数不一定就是周期调用的，FixedUpdate函数才是周期调用。</p>
<h4><span id="移动"><strong>移动：</strong></span></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">float axisH = 0.0f;//输入</span><br><span class="line">//省略</span><br><span class="line">//（Update函数）</span><br><span class="line">axisH = Input.GetAxisRaw(&quot;Horizontal&quot;);</span><br></pre></td></tr></table></figure>

<p>这一行用来检测键盘的左右方向键有没有被按下。horizontal在英语中是水平的意思。<br>当按下右，GetAxisRaw会返回1.0f，<br>按下左会返回-1.0f,<br>什么都不按下会返回0.0f。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public float speed = 3.0f;//移动速度</span><br><span class="line">//省略</span><br><span class="line">//FixedUpdate函数</span><br><span class="line">rbody.velocity = new Vector2(axisH * speed, rbody.velocity.y);</span><br></pre></td></tr></table></figure>

<p>物理类的处理需要添加到FixedUpdate函数中。<br>Rigidbody2D类所带的velocity变量是反映该游戏物体当前移动速度的vector2类型的变量。通过给这个变量赋值，可以对Rigidbody2D组件的速度进行操作。<br>右：3.0f，<br>左：-3.0f，<br>不动：0.0f。</p>
<h4><span id="角色翻转"><strong>角色翻转：</strong></span></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if (axisH &gt; 0.0f)</span><br><span class="line">&#123;</span><br><span class="line">   //向右移动</span><br><span class="line">    Debug.Log(&quot;向右移动&quot;);</span><br><span class="line">    transform.localScale = new Vector2(1, 1);</span><br><span class="line">&#125;</span><br><span class="line">    else if (axisH &lt; 0.0f) &#123;</span><br><span class="line">    //向左移动</span><br><span class="line">    Debug.Log(&quot;向左移动&quot;);</span><br><span class="line">    transform.localScale = new Vector2(-1, 1);//左右翻转</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>localScale是设置缩放倍率的参数，当其设置为负值时，就可以达到翻转效果。</p>
<h4><span id="角色跳跃"><strong>角色跳跃：</strong></span></h4><p>这一步接在5的后面。</p>
<p>对玩家角色选中Player标签。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public float jump = 9.0f;//跳跃力</span><br><span class="line">public LayerMask groundLayer;//可以落脚的层</span><br><span class="line">bool goJump = false;//跳跃开始的旗标</span><br><span class="line">bool onGround = false;//立于地面的旗标</span><br></pre></td></tr></table></figure>

<p>groundLayer是用来设定对地面增加的Ground层的。</p>
<p>层用LayerMask类型表现。</p>
<p>在LayerMask的前面加上public，从而能够在unity编辑器中修改它。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if (Input.GetButtonDown(&quot;Jump&quot;))   Jump();//跳跃</span><br></pre></td></tr></table></figure>

<p>Input是用于处理输入的类。</p>
<p><strong>GetButtonDown是用于判定指定按键时候被按下的函数，返回值为bool类型。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if (onGround || axisH != 0)</span><br><span class="line">&#123;</span><br><span class="line">//在地面上或速度不为0</span><br><span class="line">//更新速度</span><br><span class="line">rbody.velocity = new Vector2(axisH * speed, rbody.velocity.y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现当按键松开时，玩家不会笔直坠落。</p>
<p><strong>为了使角色跳跃，调用了Rigidbody类的AddForce函数。</strong></p>
<p>这是一种为附着了Rigidbody2D组件的游戏物体施加力的方法。这里向上施加了9.0f的力，也就是向正上方起跳，然后通过AddForce的第二参数来指定施加怎样的力。</p>
<p>ForceMode2D.Impulse指定的是施加瞬时的力。</p>
<p><strong>做到这里，在脚本中找到Ground Layer，选择Ground。</strong></p>
<h4><span id="动画"><strong>动画：</strong></span></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> //接触开始</span><br><span class="line">void OnTriggerEnter2D(Collider2D collision)</span><br><span class="line">&#123;</span><br><span class="line">if (collision.gameObject.tag == &quot;Goal&quot;)&#123;</span><br><span class="line">Goal();</span><br><span class="line">&#125;else if (collision.gameObject.tag == &quot;Dead&quot;)</span><br><span class="line">&#123;</span><br><span class="line">GameOver(); </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>OnTriggerEnter2D函数是当物体触碰到了碰撞体积时自动调用的方法。</p>
<p>其参数collision是触碰到的Collider组件，其带有的gameObject变量是附着了Collider组件的游戏物体。如果tag为Goal，就调用Goal函数，tag为Dead，就调用GameOver函数。</p>
<p>之后，调整玩家的游戏状态变量等以实现初始化。</p>
<h2><span id="5-制作游戏关卡">5 制作游戏关卡</span></h2><p>Layer-&gt; Add layer… -&gt; 新增layer为Ground。</p>
<p>对跳台和障碍物都设定为Ground。</p>
<p>将障碍物拖拽到画面上，将Order in Layer设置为2，添加Box Collider 2D组件。</p>
<p><strong>设置终点：</strong></p>
<p>把终点图像拖拽到画面上，Order in Layer设置为2，附着Box Collider 2D组件，并勾选Is Trigger，进行终点判定。</p>
<p>之后通过脚本来进行实际的终点判定。</p>
<p>Tag -&gt; Add Tag… -&gt; Tags + -&gt; 输入Goal -&gt; save保存，将标签设置为Goal标签。</p>
<p><strong>制作看不见的碰撞体积：</strong></p>
<p>为了不让玩家角色从画面的两端掉下去，需要造一堵看不见的墙，也就是碰撞体积。</p>
<p>单击层级视图左上角的+ -&gt; Create Empty -&gt; 命名为WallObject，添加两个Box Collider 2D组件，调整成适合的形状。</p>
<p><strong>制作游戏失败的碰撞体积：</strong></p>
<p>首先利用跳台制作一个空穴，判定玩家掉进空穴就会失败。</p>
<p>Create Empty -&gt; 改名为DeadObject，将Box Collider 2D组件附着在空物体上，调整成适合的形状，选中Is Trigger。再制作一个Dead标签。</p>
<h2><span id="6-开发游戏的ui">6 开发游戏的UI</span></h2><p><strong>添加图像UI：</strong></p>
<p>Create -&gt; UI -&gt; Image，这样就在层级视图中添加了一个叫做Canvas的物体。</p>
<p>选中Canvas，将Render Mode设置为Screen Space-Camera，将Order in Layer设置为10。点住Main Camera，将其拖到Render Camera的文本框中。这样Canvas的尺寸就收入了摄像机的范围内了。</p>
<p>把项目视图中的Game Start拖拽到Source Image。</p>
<p><img src="/2024/08/08/%E3%80%90unity2d%E3%80%91%E9%A1%B9%E7%9B%AE%E6%8A%A5%E5%91%8A-%E6%A8%AA%E6%9D%BF2d%E8%B7%91%E9%85%B7%E6%B8%B8%E6%88%8F-SuperNikki/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20240808132100.png" alt="微信截图_20240808132100"></p>

</div> 

<script>
    window.onload = detectors();
</script>
    <div class="post-footer">
    <div class="h-line-primary"></div>
    <nav class="post-nav">
        <div class="prev-item">
           
                <div class="icon arrow-left"></div>
                <div class="post-link">
                    <a href="/2024/10/16/%E3%80%90%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-1%E3%80%91%E7%9F%A9%E9%98%B5%E8%BF%9E%E4%B9%98%E9%97%AE%E9%A2%98/">Prev</a>
                </div>
            
        </div>
        <div class="next-item">
            
                <div class="icon arrow-right"></div>
                <div class="post-link">
                  <a href="/2024/08/08/%E3%80%90unity2d%E3%80%91%E3%80%90%E8%84%9A%E6%9C%AC%E3%80%91%E4%BA%BA%E7%89%A9%E7%9A%84%E7%A7%BB%E5%8A%A8%E3%80%81%E8%B7%B3%E8%B7%83%E3%80%81%E5%8A%A8%E7%94%BB/">Next</a>  
                </div>  
            
        </div>
    </nav>
</div>

    
      <div class="post-comment">

    
        <div id="vcomments"></div>
        <script>
            var META = ['nick', 'mail', 'link'];
            var meta = 'nick,mail';
            meta = meta.split(',').filter(item => {
                return META.includes(item);
            });
            new Valine({
                el: '#vcomments',
                appId: 'f131VXTFNbI57QRvg5lJFtbq-MdYXbMMI',
                appKey: 'd1GENolYcYpRMO2FbRRbarov',
                lang: 'zh-CN',
                placeholder: 'Say something',
                avatar: 'mp',
                meta: meta
            })
        </script>    
     

     
    
    

</div>
     
  
</article>
        </div>
      </div>
      
      <div class="footer">
    <div class="flex-container">
        <div class="footer-text">
            
            
            
                Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/zoeingwingkei/frame/">Frame</a>
                
        </div>
    </div>
</div>

    </div>

    
      <div class="search-popup">
    <div class="search-popup-overlay">  
    </div>
    <div class="search-popup-window" >
        <div class="search-header">
            <div class="search-input-container">
              <input autocomplete="off" autocapitalize="off" maxlength="80"
                     placeholder="Search Anything" spellcheck="false"
                     type="search" class="search-input">
            </div>
            <div class="search-close-btn">
                <div class="icon close-btn"></div>
            </div>
        </div>
        <div class="search-result-container">
        </div>
    </div>
</div>

<script>
    const searchConfig = {
        path             : "/search.xml",
        top_n_per_article: "1",
        unescape         : "false",
        trigger: "auto",
        preload: "false"
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script>
<script src="/js/search.js"></script>
    
    

  </body>
</html>
